"use strict";(self.webpackChunkabqgemini2025=self.webpackChunkabqgemini2025||[]).push([[809],{458:(e,t,a)=>{a.d(t,{O:()=>r,s:()=>n});const r=e=>{const t=JSON.parse(localStorage.getItem("visitedSurahs"))||{};t[e]?t[e]+=1:t[e]=1,localStorage.setItem("visitedSurahs",JSON.stringify(t))},n=()=>{const e=JSON.parse(localStorage.getItem("visitedSurahs"))||{};return Object.entries(e).sort(((e,t)=>t[1]-e[1])).map((e=>{let[t]=e;return t})).slice(0,4)}},5809:(e,t,a)=>{a.r(t),a.d(t,{default:()=>D});var r=a(6540),n=a(6527),s=a(5688),l=a(9418),c=a(8193);function o(e){let{title:t,content:a,cssClass:n,isRtl:s}=e;return r.createElement("div",{className:"flex flex-col ".concat(s?"flex-row-reverse space-x-reverse":"space-x-4"," border-b border-gray-400 pb-4 mt-4 mb-2"),dir:s?"rtl":"ltr"},r.createElement("p",{className:"".concat(n," font-bold")},t,":"),r.createElement("div",{className:"".concat(n," whitespace-normal"),dangerouslySetInnerHTML:{__html:a}}))}const i=function(e){let{ayah:t}=e;const{selectedTranslations:a}=(0,c.B)(),{tafsir_gujarati:n,tafsir_english:s,tafsir_urdu:i,tafsir_hindi:u,tafsir_as_kalam_roman:m}=t,d=u&&"object"==typeof u?Object.entries(u).map(((e,t)=>{let[a,r]=e;return"[".concat(t+1,"] ").concat(r)})).join("<br/>"):u,h=e=>e?"object"==typeof e?l.A.sanitize(Object.entries(e).map(((e,t)=>{let[a,r]=e;return"<b>".concat(t+1,":</b> ").concat(r)})).join("<br/>")):l.A.sanitize(e):"";return r.createElement("div",{className:"mt-2"},a.includes("gujarati")&&n&&r.createElement(o,{title:"તફસીર",content:h(n),cssClass:"gujarati-text font-gujarati text-black dark:text-white text-1xl"}),a.includes("as_kalam_roman")&&m&&r.createElement(o,{title:"Tafsir",content:h(m),cssClass:"english-text text-black dark:text-white text-1xl"}),a.includes("english")&&s&&r.createElement(o,{title:"Interpretation",content:h(s),cssClass:"english-text text-black dark:text-white text-1xl"}),a.includes("urdu")&&i&&r.createElement(o,{title:"تفسیر",content:h(i),cssClass:"urdu-text text-black dark:text-white font-urdu text-2xl",isRtl:!0}),a.includes("hindi")&&d&&r.createElement(o,{title:"तफ़सीर",content:d,cssClass:"hindi-text font-hindi text-black dark:text-white text-2xl"}))};var u=a(550),m=(a(5138),a(9914)),d=a(8027);function h(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?h(Object(a),!0).forEach((function(t){g(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):h(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function g(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}const b=function(e){let{ayahId:t,arabicText:a,translations:n,webpageLink:s}=e;const[c,o]=(0,r.useState)(!1),[i,u]=(0,r.useState)({ayahId:!0,arabicText:!0,translation:!0,tafsir:!1,webpageLink:!0}),m=e=>{const{name:t,checked:a}=e.target;u((e=>y(y({},e),{},{[t]:a})))};return r.createElement(r.Fragment,null,r.createElement("button",{onClick:()=>o(!0),className:"p-1 text-black dark:text-gray-300 hover:text-teal-600 focus:outline-none","aria-label":"Share Ayah"},r.createElement(d.eb3,{className:"h-5 w-5"})),c&&r.createElement("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},r.createElement("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-3xl w-11/12 max-w-md"},r.createElement("h2",{className:"text-lg font-semibold mb-4"},"Share Ayah"),r.createElement("div",{className:"space-y-3"},r.createElement("label",{className:"flex items-center"},r.createElement("input",{type:"checkbox",name:"ayahId",checked:i.ayahId,onChange:m,className:"mr-2"}),"Ayah ID"),r.createElement("label",{className:"flex items-center"},r.createElement("input",{type:"checkbox",name:"arabicText",checked:i.arabicText,onChange:m,className:"mr-2"}),"Arabic Text"),r.createElement("label",{className:"flex items-center"},r.createElement("input",{type:"checkbox",name:"translation",checked:i.translation,onChange:m,className:"mr-2"}),"Translation"),r.createElement("label",{className:"flex items-center"},r.createElement("input",{type:"checkbox",name:"tafsir",checked:i.tafsir,onChange:m,className:"mr-2"}),"Tafsir"),r.createElement("label",{className:"flex items-center"},r.createElement("input",{type:"checkbox",name:"webpageLink",checked:i.webpageLink,onChange:m,className:"mr-2"}),"Webpage Link")),r.createElement("div",{className:"mt-6 flex justify-end space-x-3"},r.createElement("button",{onClick:()=>o(!1),className:"px-4 py-2 bg-gray-300 dark:bg-gray-600 rounded-3xl"},"Cancel"),r.createElement("button",{onClick:async()=>{const e=[];i.ayahId&&e.push("Ayah ID: ".concat(t,"\n")),i.arabicText&&e.push("Arabic:\n".concat(a,"\n")),i.translation&&n.forEach(((t,a)=>{let{translation:r,tafsir:n,tafsir_hindi:s,tafsir_urdu:c}=t;const o=l.A.sanitize(r,{ALLOWED_TAGS:[]});if(e.push("Translation ".concat(a+1,":\n").concat(o,"\n")),i.tafsir){let t;t=n?l.A.sanitize(n,{ALLOWED_TAGS:[]}):c?l.A.sanitize(c,{USE_PROFILES:{html:!0}}):l.A.sanitize(n,{ALLOWED_TAGS:[]}),e.push("Tafsir ".concat(a+1,":\n").concat(t,"\n"))}})),i.webpageLink&&e.push("Link:\n".concat(s,"#").concat(t));const r={title:"Ayah ".concat(t),text:e.join("\n"),url:s};try{if(navigator.share&&navigator.canShare&&navigator.canShare(r))await navigator.share(r);else{const t=document.createElement("textarea");t.value=e.join("\n"),document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t),alert("Content copied to clipboard!")}}catch(e){console.error("Error sharing:",e)}finally{o(!1)}},className:"px-4 py-2 bg-teal-600 hover:bg-teal-700 text-white rounded-3xl"},"Share")))))},f=e=>{let{ayahKey:t,nextAyahKey:a}=e;const{recitationId:n=7,currentlyPlayingAyah:l,setCurrentlyPlayingAyah:c,currentlyPlayingSurah:o,setCurrentlyPlayingSurah:i,preloadedAudios:u,addPreloadedAudio:h,removePreloadedAudio:y}=(0,m.d)(),[g,b]=(0,r.useState)(null),[f,p]=(0,r.useState)(!1),[x,E]=(0,r.useState)(!1),[v,k]=(0,r.useState)(!1),N=(0,r.useRef)(null),w=(0,r.useRef)(new AbortController),_=(0,r.useRef)(a);(0,r.useEffect)((()=>{_.current=a}),[a]),(0,r.useEffect)((()=>{const e="".concat(n,"-").concat(t),a=u[e];a&&(b(a.src),N.current=a,y(e))}),[t,n,u,y]),(0,r.useEffect)((()=>()=>{var e;null===(e=N.current)||void 0===e||e.pause(),w.current.abort()}),[]),(0,r.useEffect)((()=>{var e;b(null),null===(e=N.current)||void 0===e||e.pause(),p(!1)}),[n]);const S=async e=>{const t="".concat(n,"-").concat(e);try{var a;if(u[t])return;const r=null===(a=(await(0,s.K)("/recitations/".concat(n,"/by_ayah/").concat(e),{signal:w.current.signal})).audio_files)||void 0===a||null===(a=a[0])||void 0===a?void 0:a.url;if(!r)return;const l="https://verses.quran.com/".concat(r),c=new Audio(l);c.preload="auto",h(t,c),console.log("Preloaded audio for ayah: ".concat(e))}catch(e){"AbortError"!==e.name&&console.error("Error preloading next Ayah:",e)}},A=e=>{o&&(o.pause(),i(null)),l&&l.ayahKey!==t&&(l.audioRef.pause(),l.setIsPlaying(!1)),N.current&&N.current.src===e||(N.current=new Audio(e));const r=N.current,s=()=>{p(!1),c(null);const e=_.current;if(!e)return;O(e);const t="".concat(n,"-").concat(e);if(u[t]){const t=document.getElementById("play-btn-".concat(e));t&&t.click()}else setTimeout((()=>{var t;null===(t=document.getElementById("play-btn-".concat(e)))||void 0===t||t.click()}),300)};r.removeEventListener("ended",s),r.addEventListener("ended",s),k(!0),r.play().then((()=>{k(!1),p(!0),c({ayahKey:t,audioRef:r,setIsPlaying:p}),a&&S(a)})).catch((e=>{k(!1),console.error("Play error:",e)}))},O=e=>{const t=document.getElementById("ayah-".concat(e));null==t||t.scrollIntoView({behavior:"smooth",block:"center"})};return r.createElement("button",{id:"play-btn-".concat(t),onClick:()=>{var e;f?(null===(e=N.current)||void 0===e||e.pause(),p(!1),c(null)):g?A(g):(async()=>{if(!x){E(!0),w.current=new AbortController;try{var e;const r=null===(e=(await(0,s.K)("/recitations/".concat(n,"/by_ayah/").concat(t),{signal:w.current.signal})).audio_files)||void 0===e||null===(e=e[0])||void 0===e?void 0:e.url;if(!r)return void console.error("No audio URL found for Ayah:",t);const l="https://verses.quran.com/".concat(r);b(l),A(l),a&&S(a)}catch(e){"AbortError"!==e.name&&console.error("Error fetching audio:",e)}finally{E(!1)}}})()},className:"text-3xl text-black dark:text-gray-200 transition-all duration-200",disabled:x||v},x||v?r.createElement(d.hW,{className:"w-6 h-6 animate-spin text-gray-500 dark:text-gray-400"}):f?r.createElement(d.kwt,{className:"w-4 h-4 text-black dark:text-gray-200"}):r.createElement(d.gSK,{className:"w-4 h-4 text-black dark:text-gray-200"}))};var p=a(6973);const x=function(e){let{ayah:t,surahId:a,nextAyah:s}=e;const o=(0,n.zy)(),h=(0,n.Zp)(),{ayah_id:y,ayah_number:g,arabic_text:x,ayah_key:E}=t,v=window.location.href,[k,N]=(0,r.useState)(!1),[w,_]=(0,r.useState)(!1),{selectedTranslations:S}=(0,c.B)(),{currentlyPlayingAyah:A}=(0,m.d)(),[O,j]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{j((null==A?void 0:A.ayahKey)===t.ayah_id)}),[A,t.ayah_id]),(0,r.useEffect)((()=>{const e=o.hash;if(e&&e.startsWith("#ayah-")){const t=e.replace("#ayah-",""),a=document.getElementById("ayah-".concat(t));a&&(a.scrollIntoView({behavior:"smooth",block:"center"}),setTimeout((()=>{h(o.pathname,{replace:!0})}),1e3))}}),[o.hash,o.pathname,h]),(0,r.useEffect)((()=>{const e=JSON.parse(localStorage.getItem("bookmarks"))||{surahs:{},ayahs:{}};_(void 0!==e.ayahs[t.ayah_id])}),[t]),r.createElement("div",{className:"mb-4 p-4 rounded-3xl shadow-md transition-colors duration-0 ".concat(O?"bg-blue-100 dark:bg-blue-900":"bg-white dark:bg-gray-800"),id:t.ayah_id},r.createElement("div",{className:"flex justify-between items-center"},r.createElement("div",null,r.createElement("span",{className:"font-bold"},"Ayah:")," ",t.ayah_number),r.createElement("div",{className:"flex items-center space-x-4"},r.createElement(b,{ayahId:y,arabicText:x,translations:S.map((e=>{const a=t["tafsir_".concat(e)]||"",r="hindi"===e&&"object"==typeof a?Object.entries(a).map(((e,t)=>{let[a,r]=e;return"(".concat(t+1,") ").concat(r)})).join("\n"):a;return{translation:t["translation_".concat(e)]||"",tafsir:r}})),webpageLink:v}),r.createElement(f,{ayahKey:y,nextAyahKey:s?s.ayah_id:null}),r.createElement("button",{className:"ayah-bookmark-icon text-black dark:text-white transition-all duration-0",onClick:()=>{const e=JSON.parse(localStorage.getItem("bookmarks"))||{surahs:{},ayahs:{}},a=t.ayah_id;w?(delete e.ayahs[a],u.oR.info("Removed bookmark for Ayah ".concat(t.ayah_id),{position:"top-right",autoClose:2e3})):(e.ayahs[a]={surahId:t.surah_id,ayahNumber:t.ayah_number,timestamp:Date.now()},u.oR.success("Bookmarked Ayah ".concat(t.ayah_id," successfully!"),{position:"top-right",autoClose:2e3})),localStorage.setItem("bookmarks",JSON.stringify(e)),_(!w)}},w?r.createElement(p.L80,{className:"w-5 h-5 text-black dark:text-gray-300"}):r.createElement(p.in_,{className:"w-5 h-5 text-black dark:text-gray-300"})))),r.createElement("p",{className:"arabic-text font-arabic text-3xl text-right mt-4 mb-2 transition-all duration-0 ".concat(O?"text-blue-500 dark:text-yellow-300 scale-105":""),dir:"rtl",style:{lineHeight:"1.5em"}},t.arabic_text),r.createElement("hr",{className:"my-4"}),S.includes("gujarati")&&t.translation_gujarati&&r.createElement("div",{className:"mt-4 mb-2 border-b border-gray-400 pb-4"},r.createElement("p",{className:"gujarati-text font-gujarati text-gray-900 text-1xl"},r.createElement("b",null,"ભાષાન્તર:")," ",t.translation_gujarati),r.createElement("p",{className:"text-xs text-left text-gray-600 dark:text-gray-400"}," - Ahsan-ul-Bayan | Abdul Qadir Nadisarwala")),S.includes("as_kalam_roman")&&t.translation_as_kalam_roman&&r.createElement("div",{className:"mt-4 mb-2 border-b border-gray-400 pb-4"},r.createElement("p",{className:"english-text text-gray-900 text-1xl"},r.createElement("b",null,"Tarjuma:")," ",t.translation_as_kalam_roman),r.createElement("p",{className:"text-xs text-left text-gray-600 dark:text-gray-400"}," - Ahsanul Kalaam ")),S.includes("english")&&t.translation_english&&r.createElement("div",{className:"mt-4 mb-2 border-b border-gray-400 pb-4"},r.createElement("p",{className:"english-text text-gray-900 text-1xl"},r.createElement("b",null,"Translation:")," ",t.translation_english),r.createElement("p",{className:"text-xs text-left text-gray-600 dark:text-gray-400"}," - Hilali & Mohsin Khan")),S.includes("urdu")&&t.translation_urdu&&r.createElement("div",{className:"mt-4 mb-2 border-b border-gray-400 pb-4"},r.createElement("div",{className:"flex flex-row-reverse space-x-4"},r.createElement("p",{className:"urdu-text text-gray-900 font-urdu text-2xl"},r.createElement("b",null,"ترجمہ:")),r.createElement("p",{className:"urdu-text text-gray-900 font-urdu text-2xl",dangerouslySetInnerHTML:{__html:l.A.sanitize(t.translation_urdu)}})),r.createElement("p",{className:"text-xs text-right text-gray-600 dark:text-gray-400"}," - Ahsan-ul-Bayan | Muhammad Junagarhi")),S.includes("hindi")&&t.translation_hindi&&r.createElement("div",{className:"mt-4 mb-2 border-b border-gray-400 pb-4"},r.createElement("div",{className:"flex space-x-4"},r.createElement("p",{className:"hindi-text font-hindi text-gray-900 text-2xl"},r.createElement("b",null,"अनुवाद:")),r.createElement("p",{className:"hindi-text font-hindi text-gray-900 text-2xl",dangerouslySetInnerHTML:{__html:(I=l.A.sanitize(t.translation_hindi),I.replace(/<sup foot_note=\"(\d+)\">(\d+)<\/sup>/g,((e,t,a)=>"<sup style='color: teal; font-weight: bold;'>".concat(a,"</sup>"))))}})),r.createElement("p",{className:"text-xs text-left text-gray-600 dark:text-gray-400"}," - Maulana Azizul Haque al-Umari")),S.some((e=>{const a="translation_".concat(e),r="tafsir_".concat(e);return!!t[a]&&!!t[r]}))&&r.createElement("div",null,r.createElement("button",{className:"flex items-center justify-between w-full bg-gray-400 px-4 py-2 mt-4 rounded-3xl focus:outline-none",onClick:()=>{N(!k)}},r.createElement("span",{className:"font-bold text-black"},"Tafsir"),r.createElement(d.BZI,{className:"h-6 w-6 transform transition-transform duration-0 text-black dark:text-gray-900 ".concat(k?"rotate-180":"")})),r.createElement("div",{className:"".concat(k?"":"hidden"," mt-2")},r.createElement(i,{ayah:t}))));var I};var E=a(7184);const v=function(e){let{surah:t}=e;return t?r.createElement("div",{className:"surah-header mb-5 p-5 bg-white rounded-3xl gap-4 flex flex-wrap justify-center items-center shadow-md"},r.createElement("div",{className:"flex justify-center items-center w-full"},r.createElement("div",null,r.createElement("h2",{className:"text-2xl font-bold text-gray-800"}," ",t.surah_id," - ",t.name_english))),r.createElement("div",{className:"surah-header-inner-info mt-2 w-full display: contents"},r.createElement("p",{className:"text-sm"},r.createElement("span",{className:"font-medium text-gray-900"},"Ayah:")," ",t.total_ayahs),r.createElement("p",{className:"text-sm"},r.createElement("span",{className:"font-medium text-gray-900"},"Parah:")," ",t.parah_info),r.createElement("p",{className:"text-sm"},r.createElement("span",{className:"font-medium text-gray-900"},"Ruku:")," ",t.surah_total_ruku),r.createElement("p",{className:"text-sm"},r.createElement("span",{className:"font-medium text-gray-900"},"Revelation:")," ",t.revelation_order))):r.createElement("div",null,"Loading Surah details...")};var k=a(2995),N=a(5556),w=a.n(N);function _(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function S(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?_(Object(a),!0).forEach((function(t){A(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):_(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function A(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function O(e){var t;let{isCollapsed:a,setIsCollapsed:l}=e;const c=(0,n.Zp)(),o=(0,n.zy)(),{surahs:i,loading:u,error:m}=(()=>{const[e,t]=(0,r.useState)([]),[a,n]=(0,r.useState)(!0),[l,c]=(0,r.useState)(null);return(0,r.useEffect)((()=>{(async()=>{const e=localStorage.getItem("surahs");if(e)return t(JSON.parse(e)),void n(!1);try{const{surahs:e}=await(0,s.F)("/surahs");t(e),localStorage.setItem("surahs",JSON.stringify(e)),c(null)}catch(e){console.error("Error fetching Surahs:",e),c("Failed to load Surahs. Please try again.")}finally{n(!1)}})()}),[]),{surahs:e,loading:a,error:l}})(),[d,h]=(0,r.useState)({surah:null,ayah:null}),{ayahs:y,loading:g,error:b}=(e=>{const[t,a]=(0,r.useState)([]),[n,l]=(0,r.useState)(!1),[c,o]=(0,r.useState)(null);return(0,r.useEffect)((()=>{(async()=>{if(!e)return;const t=localStorage.getItem("ayahs_".concat(e.surah_id));if(t)return a(JSON.parse(t)),void l(!1);l(!0);try{const{ayahs:t}=await(0,s.F)("/surah/".concat(e.surah_id));a(t),localStorage.setItem("ayahs_".concat(e.surah_id),JSON.stringify(t)),o(null)}catch(e){console.error("Error fetching Ayahs:",e),o("Failed to load Ayahs. Please try again.")}finally{l(!1)}})()}),[e]),{ayahs:t,loading:n,error:c}})(d.surah),f=(0,r.useRef)(null),p=e=>{f.current&&!f.current.contains(e.target)&&l(!0)};return(0,r.useEffect)((()=>(document.addEventListener("mousedown",p),()=>{document.removeEventListener("mousedown",p)})),[]),r.createElement("div",{ref:f,className:"mb-4 bg-white dark:bg-gray-800 p-2 rounded-3xl shadow-sm border border-gray-200 dark:border-gray-700 "},r.createElement("div",{className:"space-y-4"},r.createElement("div",{className:"space-y-2"},r.createElement("label",{className:"block text-sm pl-2 font-medium text-gray-700 dark:text-gray-300"},"Select Surah"),r.createElement("select",{className:"w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-3xl focus:ring-2 focus:ring-teal-500",value:(null===(t=d.surah)||void 0===t?void 0:t.surah_id)||"",onChange:e=>{const t=e.target.value,a=i.find((e=>e.surah_id===parseInt(t,10)));h({surah:a,ayah:null})},disabled:u},r.createElement("option",{value:"",disabled:!0},u?"Loading surahs...":"Select Surah"),i.map((e=>r.createElement("option",{key:e.surah_id,value:e.surah_id},e.surah_number,". ",e.name_english)))),m&&r.createElement("p",{className:"text-sm text-red-500"},m)),r.createElement("div",{className:"space-y-2"},r.createElement("label",{className:"block text-sm pl-2 font-medium text-gray-700 dark:text-gray-300"},"Select Ayah"),r.createElement("select",{className:"w-full px-3 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-3xl focus:ring-2 focus:ring-teal-500",value:d.ayah||"",onChange:e=>{h((t=>S(S({},t),{},{ayah:e.target.value})))},disabled:g||!d.surah},r.createElement("option",{value:"",disabled:!0},g?"Loading ayahs...":"Select Ayah"),y.map((e=>r.createElement("option",{key:e.ayah_id,value:e.ayah_id},"Ayah ",e.ayah_number)))),b&&r.createElement("p",{className:"text-sm text-red-500"},b)),r.createElement("button",{onClick:()=>{if(!d.surah||!d.ayah)return;const e=o.pathname.startsWith("/surah")?"surah":"arabicreading";c("/".concat(e,"/").concat(d.surah.surah_id,"#ayah-").concat(d.ayah));const t=()=>{document.getElementById("ayah-".concat(d.ayah))?(()=>{const e=document.getElementById("ayah-".concat(d.ayah));e&&(e.scrollIntoView({behavior:"smooth",block:"center"}),e.classList.add("animate-highlight"),setTimeout((()=>e.classList.remove("animate-highlight")),2e3))})():setTimeout(t,100)};t(),l(!0)},disabled:!d.surah||!d.ayah,className:"w-full py-2 px-4 bg-teal-600 hover:bg-teal-700 text-white font-medium rounded-3xl transition-colors disabled:opacity-50"},"Jump to Selected Ayah")))}O.propTypes={surahs:w().array,ayahs:w().array,loading:w().object,error:w().object,isCollapsed:w().bool.isRequired,setIsCollapsed:w().func.isRequired,containerRef:w().object,handleSurahChange:w().func,handleAyahChange:w().func,handleGo:w().func,handleClickOutside:w().func};const j=O;var I=a(2993),C=a(414),P=a(293),T=a(458);const L=e=>{let{activeTab:t,handleTabChange:a,enabled:n=!0,rukus:s=[]}=e;const{isAudioPlayerDisabled:l}=(0,m.d)(),[c,o]=(0,r.useState)(!1),[i,u]=(0,r.useState)(!1),h=(0,r.useRef)(null),y=l?"bottom-4":"bottom-20";(0,r.useEffect)((()=>{const e=()=>{o(window.scrollY>50)};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)}),[]);return(0,r.useEffect)((()=>{const e=e=>{h.current&&!h.current.contains(e.target)&&u(!1)};return i?document.addEventListener("mousedown",e):document.removeEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[i]),n?r.createElement("div",{className:"\n        fixed ".concat(y," left-1/2 transform -translate-x-1/2 z-40 transition-opacity duration-300\n        ").concat(c?"opacity-100":"opacity-0 pointer-events-none","\n      ")},r.createElement("div",{className:"bg-gray-100 dark:bg-gray-900 shadow-xl rounded-full p-2 flex space-x-6"},r.createElement("button",{onClick:()=>a("translation"),className:"p-2 hover:bg-gray-300 dark:hover:bg-gray-600 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500","aria-label":"Switch to Translation"},r.createElement(d.gqt,{className:"h-5 w-5 text-gray-800 dark:text-gray-100"})),r.createElement("button",{onClick:()=>a("arabic only"),className:"p-2 hover:bg-gray-300 dark:hover:bg-gray-600 rounded-full focus:outline-none","aria-label":"Switch to Arabic Only"},r.createElement(d.hko,{className:"h-5 w-5 text-gray-800 dark:text-gray-100"})),r.createElement("div",{className:"relative"},r.createElement("button",{onClick:()=>{u((e=>!e))},className:"p-2 hover:bg-gray-300 dark:hover:bg-gray-600 rounded-full focus:outline-none","aria-label":"Select Ruku"},r.createElement(d.OXb,{className:"h-5 w-5 text-gray-800 dark:text-gray-100"})),i&&r.createElement("div",{ref:h,className:"absolute right-0 bottom-full mb-2 w-40 max-h-60 overflow-y-auto bg-white dark:bg-gray-800 shadow-xl rounded-lg z-20"},r.createElement("ul",{className:"py-2"},s.map((e=>r.createElement("li",{key:e.ruku_number},r.createElement("button",{onClick:()=>(e=>{const t="ayah-".concat(e.start_ayah),a=document.getElementById(t);a&&a.scrollIntoView({behavior:"smooth",block:"center"}),u(!1)})(e),className:"w-full text-left px-4 py-2 text-sm hover:bg-gray-200 dark:hover:bg-gray-700"},"Ruku ".concat(e.ruku_number)))))))))):null},R=e=>{let{surah:t,currentAyahNumber:a,currentRukuNumber:n,parahNumber:s}=e;return r.createElement("div",{className:"sticky top-0 z-10 bg-gray-200 dark:bg-gray-900 p-4 pr-4 pl-4 shadow-md rounded-b-3xl"},r.createElement("div",{className:"flex flex-col md:flex-row md:justify-between items-center"},r.createElement("div",{className:"text-xs"},r.createElement("strong",null,null==t?void 0:t.surah_id," - ",null==t?void 0:t.name_english," ")),r.createElement("div",{className:"text-xs"},r.createElement("strong",null,"Parah:")," ",s,"  | ",r.createElement("strong",null,"Ruku:")," ",n,"  | ",r.createElement("strong",null,"Ayah:")," ",a)))};const D=function(){const{surahId:e}=(0,n.g)(),[t,a]=(0,r.useState)({surah:null,ayahs:[]}),[l,c]=(0,r.useState)([]),[o,i]=(0,r.useState)(null),[u,h]=(0,r.useState)(!0),[y,g]=(0,r.useState)(null),b=(0,r.useRef)({}),{isAudioPlayerDisabled:f,setIsAudioPlayerDisabled:p}=(0,m.d)(),{updateProgress:N}=(0,P.v)(),[w,_]=(0,r.useState)(!1),[S,A]=(0,r.useState)(t.ayahs.length?t.ayahs[0].ayah_number:null),[O,D]=(0,r.useState)(!1),[J,z]=(0,r.useState)([]),[B,F]=(0,r.useState)(localStorage.getItem("activeTab")||"translation"),[K,W]=(0,r.useState)("fade-in"),[q,M]=(0,r.useState)(!1),[V,G]=(0,r.useState)(!0);(0,r.useEffect)((()=>{(0,T.O)(e)}),[e]),(0,r.useEffect)((()=>{const e=()=>{window.scrollY>50?D(!0):D(!1)};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)}),[]),(0,r.useEffect)((()=>{(async()=>{try{const e=await(0,s.F)("/api/parahs");z(e.parahs)}catch(e){console.error("Error fetching parahs:",e)}})()}),[]),(0,r.useEffect)((()=>{if(!t.ayahs.length)return;const a=new IntersectionObserver((t=>{t.forEach((t=>{if(t.isIntersecting){const a=t.target.id.replace("ayah-","");A(a),N(e,a,B)}}))}),{threshold:.5,rootMargin:"0px 0px -10% 0px"});return Object.values(b.current).forEach((e=>{e&&a.observe(e)})),()=>a.disconnect()}),[t.ayahs,e,N]),(0,r.useEffect)((()=>{(async()=>{try{const t=localStorage.getItem("surahData-".concat(e)),r=localStorage.getItem("rukusData-".concat(e));if(t&&r)a(JSON.parse(t)),c(JSON.parse(r));else{const t=await(0,s.F)("/surah/".concat(e));console.log("Surah Data:",t);const r=await(0,s.F)("/surah-rukus?surah=".concat(e));console.log("Ruku Data:",r),a({surah:t.surah,ayahs:t.ayahs}),c(r),localStorage.setItem("surahData-".concat(e),JSON.stringify({surah:t.surah,ayahs:t.ayahs})),localStorage.setItem("rukusData-".concat(e),JSON.stringify(r))}}catch(e){console.error("Error fetching data:",e)}finally{h(!1)}})()}),[e]),(0,r.useEffect)((()=>{t.surah&&(document.title="".concat(t.surah.name_english," - ").concat("translation"===B?"Translation":"Arabic"))}),[t.surah,B]);const H=e=>{let{number:t,start:a,end:n}=e;return r.createElement("div",{className:"relative py-6"},r.createElement("div",{className:"absolute inset-0 flex items-center","aria-hidden":"true"},r.createElement("div",{className:"w-full border-t border-gray-300 dark:border-gray-600"})),r.createElement("div",{className:"relative flex justify-center"},r.createElement("span",{className:"bg-white dark:bg-gray-800 px-4 text-sm text-gray-500 dark:text-gray-400"},"Ruku ",t," (Ayah ",a,"-",n,")")))};(0,r.useEffect)((()=>{const e=()=>{const e=window.location.hash.substring(1),t=e.startsWith("ayah-")?e.substring(5):e;if(t&&!u){const e=b.current[t];e&&(g(t),e.scrollIntoView({behavior:"smooth",block:"center"}),setTimeout((()=>g(null)),1e3))}};return u||(e(),window.addEventListener("hashchange",e)),()=>{window.removeEventListener("hashchange",e)}}),[t.ayahs,u]),(0,r.useEffect)((()=>{if(!t.ayahs.length)return;const a=new IntersectionObserver((t=>{t.forEach((t=>{if(t.isIntersecting){const a=t.target.id.replace("ayah-","");N(e,a,B)}}))}),{threshold:.5,rootMargin:"0px 0px -10% 0px"});return Object.values(b.current).forEach((e=>{e&&a.observe(e)})),()=>a.disconnect()}),[t.ayahs,e,N]),(0,r.useEffect)((()=>{const e=localStorage.getItem("readingProgress");console.log("Current reading progress:",JSON.parse(e))}),[]);const U=e=>{W("fade-out"),setTimeout((()=>{F(e),localStorage.setItem("activeTab",e),W("fade-in")}),300)};if(u)return r.createElement("div",{className:"flex justify-center items-center"},"  ",r.createElement(d.hW,{className:"w-6 h-6 min-h-1px text-center animate-spin text-gray-500 dark:text-gray-400"}));if(!t.surah||!t.ayahs)return r.createElement("div",null,"Error loading data");const Z=t.ayahs.find((e=>e.ayah_id.toString()===S)),Y=Z?Z.ayah_number:"";let Q="";if(Z&&l.length){const e=Number(Z.ayah_number),t=l.find((t=>{const a=Number(t.start_ayah.split(":")[1]),r=Number(t.end_ayah.split(":")[1]);return e>=a&&e<=r}));Q=t?t.ruku_number:""}const X=Z?Z.parah_number:"";return r.createElement("div",{className:"container mx-auto p-4 mt-0 sm:max-w-full",style:{maxWidth:"800px"}},"translation"===B&&O&&r.createElement(R,{surah:t.surah,currentAyahNumber:Y,currentRukuNumber:Q,parahNumber:X}),r.createElement("div",{className:"flex items-center justify-between mb-4 text-sm"},r.createElement("div",{className:"flex space-x-1"},["translation","arabic only"].map((e=>r.createElement("button",{key:e,onClick:()=>U(e),className:"px-4 py-2 rounded-3xl ".concat(B===e?"bg-teal-500 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600")},e.charAt(0).toUpperCase()+e.slice(1))))),r.createElement("button",{onClick:()=>M(!q),className:"flex items-center gap-1 px-4 py-2 rounded-3xl ".concat(q?"bg-teal-500 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600")},r.createElement(d.Vr3,{className:"h-5 w-5 transition-transform ".concat(q?"rotate-180":"")}),r.createElement("span",null,"Go to Ayah"))),q&&r.createElement("div",{className:"mb-6"},r.createElement(j,{isCollapsed:!q,setIsCollapsed:M})),r.createElement("div",{className:"mb-4 flex items-center gap-2"},r.createElement("div",{className:"flex-1"},r.createElement("label",{htmlFor:"ruku-select",className:"block text-sm font-medium text-gray-700 dark:text-gray-300"},"Select Ruku:"),r.createElement("select",{id:"ruku-select",onChange:e=>{i(e.target.value)},className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 bg-gray-200 dark:bg-gray-700 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm rounded-3xl"},r.createElement("option",{value:""},"Choose a Ruku"),l.map((e=>r.createElement("option",{key:e.ruku_number,value:e.ruku_number},"Ruku ",e.ruku_number," (Ayah ",e.start_ayah.split(":")[1],"-",e.end_ayah.split(":")[1],")"))))),r.createElement("button",{onClick:()=>{if(!o)return;const e=l.find((e=>e.ruku_number==o));if(e){const t=e.start_ayah,a=document.getElementById("ayah-".concat(t));a&&(a.scrollIntoView({behavior:"smooth",block:"center"}),g(t),setTimeout((()=>g(null)),1e3))}},className:"mt-6 px-4 py-2 bg-teal-500 text-white rounded-3xl hover:bg-teal-600"},"Go")),r.createElement("div",{className:"transition-opacity duration-300 ".concat(K)},"translation"===B?r.createElement(r.Fragment,null,r.createElement(k.A,null),r.createElement(v,{surah:t.surah}),r.createElement("div",{className:"mb-20"},t.ayahs.map(((e,a)=>{const n=t.ayahs[a+1]||null,s=l.find((t=>e.ayah_id===t.start_ayah||e.ayah_id===t.end_ayah));return r.createElement(r.Fragment,{key:e.ayah_id},r.createElement("div",{id:"ayah-".concat(e.ayah_id),ref:t=>b.current[e.ayah_id]=t,className:"p-1 ".concat(y===e.ayah_id.toString()?"bg-yellow-300":""),"data-read-status":"unread"},r.createElement(x,{key:e.ayah_id,ayah:e,surahId:t.surah.surah_id,nextAyah:n})),s&&e.ayah_id===s.end_ayah&&r.createElement(H,{number:s.ruku_number,start:s.start_ayah.split(":")[1],end:s.end_ayah.split(":")[1]}))})),r.createElement(k.A,null))):r.createElement(C.default,{selectedRuku:o,rukus:l})),r.createElement(I.A,{isOpen:w,onClose:()=>_(!1),onToggleAudio:p}),!f&&r.createElement(E.A,{key:"audio-player-".concat(t.surah.surah_id),surahId:t.surah.surah_id}),r.createElement(L,{activeTab:B,handleTabChange:U,isNavigateOpen:q,setIsNavigateOpen:M,enabled:V,rukus:l}))}}}]);